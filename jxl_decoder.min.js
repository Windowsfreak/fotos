var JxlCodecModule=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return"undefined"!=typeof __filename&&(e=e||__filename),function(r){function n(){return w.buffer!=T&&ed(w.buffer),b}function t(){return w.buffer!=T&&ed(w.buffer),k}function a(){return w.buffer!=T&&ed(w.buffer),S}function i(){return w.buffer!=T&&ed(w.buffer),O}function o(){return w.buffer!=T&&ed(w.buffer),A}function u(){return w.buffer!=T&&ed(w.buffer),I}function s(){return w.buffer!=T&&ed(w.buffer),N}var c,f,l,d,p,h,m,E,v,_,$,g,w,y,x,T,b,k,S,C,O,A,I,N,R,L,P,D,W=void 0!==(r=r||{})?r:{};W.ready=new Promise(function(e,r){c=e,f=r});var j={};for(l in W)W.hasOwnProperty(l)&&(j[l]=W[l]);var H=[],M="./this.program",B=function(e,r){throw r},F=!1,G=!1,U=!1,V=!1;F="object"==typeof window,G="function"==typeof importScripts,U="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,V=!F&&!U&&!G;var q=W.ENVIRONMENT_IS_PTHREAD||!1,z="";function K(e){return W.locateFile?W.locateFile(e,z):z+e}if(U){z=G?require("path").dirname(z)+"/":__dirname+"/",d=function e(r,n){return E||(E=require("fs")),v||(v=require("path")),r=v.normalize(r),E.readFileSync(r,n?null:"utf8")},h=function e(r){var n=d(r,!0);return n.buffer||(n=new Uint8Array(n)),ei(n.buffer),n},process.argv.length>1&&(M=process.argv[1].replace(/\\/g,"/")),H=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof r1))throw e}),process.on("unhandledRejection",eT),B=function(e){process.exit(e)},W.inspect=function(){return"[Emscripten Module object]"};try{_=require("worker_threads")}catch(Q){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Q}global.Worker=_.Worker}else V?("undefined"!=typeof read&&(d=function e(r){return read(r)}),h=function e(r){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(r)):(n=read(r,"binary"),ei("object"==typeof n),n)},"undefined"!=typeof scriptArgs?H=scriptArgs:"undefined"!=typeof arguments&&(H=arguments),"function"==typeof quit&&(B=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(F||G)&&(G?z=self.location.href:"undefined"!=typeof document&&document.currentScript&&(z=document.currentScript.src),e&&(z=e),z=0!==z.indexOf("blob:")?z.substr(0,z.lastIndexOf("/")+1):"",U?(d=function e(r,n){return E||(E=require("fs")),v||(v=require("path")),r=v.normalize(r),E.readFileSync(r,n?null:"utf8")},h=function e(r){var n=d(r,!0);return n.buffer||(n=new Uint8Array(n)),ei(n.buffer),n}):(d=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},G&&(h=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),p=function(e,r,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){if(200==t.status||0==t.status&&t.response){r(t.response);return}n()},t.onerror=n,t.send(null)}),m=function(e){document.title=e});U&&"undefined"==typeof performance&&(global.performance=require("perf_hooks").performance);var Y=W.print||console.log.bind(console),X=W.printErr||console.warn.bind(console);for(l in j)j.hasOwnProperty(l)&&(W[l]=j[l]);function J(e){J.shown||(J.shown={}),J.shown[e]||(J.shown[e]=1,X(e))}j=null,W.arguments&&(H=W.arguments),W.thisProgram&&(M=W.thisProgram),W.quit&&(B=W.quit);var Z=[];function ee(e,r){if(!$){$=new WeakMap;for(var n=0;n<R.length;n++){var t=R.get(n);t&&$.set(t,n)}}if($.has(e))return $.get(e);var a=function e(){if(Z.length)return Z.pop();try{R.grow(1)}catch(r){if(!(r instanceof RangeError))throw r;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return R.length-1}();try{R.set(a,e)}catch(i){if(!(i instanceof TypeError))throw i;var o=function e(r,n){if("function"==typeof WebAssembly.Function){for(var t={i:"i32",j:"i64",f:"f32",d:"f64"},a={parameters:[],results:"v"==n[0]?[]:[t[n[0]]]},i=1;i<n.length;++i)a.parameters.push(t[n[i]]);return new WebAssembly.Function(a,r)}var o=[1,0,1,96],u=n.slice(0,1),s=n.slice(1),c={i:127,j:126,f:125,d:124};o.push(s.length);for(var i=0;i<s.length;++i)o.push(c[s[i]]);"v"==u?o.push(0):o=o.concat([1,c[u]]),o[1]=o.length-2;var f=new Uint8Array([0,97,115,109,1,0,0,0].concat(o,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),l=new WebAssembly.Module(f);return new WebAssembly.Instance(l,{e:{f:r}}).exports.f}(e,r);R.set(a,o)}return $.set(e,a),a}var er=0,en=function(e){er=e};Atomics.load,Atomics.store,Atomics.compareExchange,W.wasmBinary&&(g=W.wasmBinary);var et=W.noExitRuntime||!1;"object"!=typeof WebAssembly&&eT("no native wasm support detected");var ea=!1;function ei(e,r){e||eT("Assertion failed: "+r)}function eo(e,r,t,a,i){var o,u,s={string:function(e){var r=0;if(null!=e&&0!==e){var n=(e.length<<2)+1;r=rk(n),ec(e,r,n)}return r},array:function(e){var r,t,a=rk(e.length);return r=e,t=a,n().set(r,t),a}},c=(u=W["_"+(o=e)],ei(u,"Cannot call unknown function "+o+", make sure it is exported"),u),f=[],l=0;if(a)for(var d=0;d<a.length;d++){var p=s[t[d]];p?(0===l&&(l=rT()),f[d]=p(a[d])):f[d]=a[d]}var h,m=c.apply(null,f);return m=(h=m,"string"===r?es(h):"boolean"===r?Boolean(h):h),0!==l&&rb(l),m}function eu(e,r,n){for(var t=r+n,a="";!(r>=t);){var i=e[r++];if(!i)break;if(!(128&i)){a+=String.fromCharCode(i);continue}var o=63&e[r++];if((224&i)==192){a+=String.fromCharCode((31&i)<<6|o);continue}var u=63&e[r++];if((i=(240&i)==224?(15&i)<<12|o<<6|u:(7&i)<<18|o<<12|u<<6|63&e[r++])<65536)a+=String.fromCharCode(i);else{var s=i-65536;a+=String.fromCharCode(55296|s>>10,56320|1023&s)}}return a}function es(e,r){return e?eu(t(),e,r):""}function ec(e,r,n){return function e(r,n,t,a){if(!(a>0))return 0;for(var i=t,o=t+a-1,u=0;u<r.length;++u){var s=r.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&r.charCodeAt(++u)),s<=127){if(t>=o)break;n[t++]=s}else if(s<=2047){if(t+1>=o)break;n[t++]=192|s>>6,n[t++]=128|63&s}else if(s<=65535){if(t+2>=o)break;n[t++]=224|s>>12,n[t++]=128|s>>6&63,n[t++]=128|63&s}else{if(t+3>=o)break;n[t++]=240|s>>18,n[t++]=128|s>>12&63,n[t++]=128|s>>6&63,n[t++]=128|63&s}}return n[t]=0,t-i}(e,t(),r,n)}function ef(e,r,t){for(var a=0;a<e.length;++a)n()[r++>>0]=e.charCodeAt(a);t||(n()[r>>0]=0)}function el(e,r){return e%r>0&&(e+=r-e%r),e}function ed(e){T=e,W.HEAP8=b=new Int8Array(e),W.HEAP16=S=new Int16Array(e),W.HEAP32=O=new Int32Array(e),W.HEAPU8=k=new Uint8Array(e),W.HEAPU16=C=new Uint16Array(e),W.HEAPU32=A=new Uint32Array(e),W.HEAPF32=I=new Float32Array(e),W.HEAPF64=N=new Float64Array(e)}q&&(T=W.buffer);var ep=W.INITIAL_MEMORY||104857600;if(q)w=W.wasmMemory,T=W.buffer;else if(W.wasmMemory)w=W.wasmMemory;else if(!((w=new WebAssembly.Memory({initial:ep/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw X("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),U&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");w&&(T=w.buffer),ep=T.byteLength,ed(T);var e8=[],eh=[],em=[],eE=[],ev=!1,e_=!1;function e$(){ev=!0,q||eA(eh)}function eg(e){e8.unshift(e)}function e0(e){eE.unshift(e)}var ew=0,ey=null,ex=null;function eT(e){W.onAbort&&W.onAbort(e),q&&console.error("Pthread aborting at "+Error().stack),X(e+=""),ea=!0,x=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var r=new WebAssembly.RuntimeError(e);throw f(r),r}function eb(e){return e.startsWith("data:application/octet-stream;base64,")}function ek(e){return e.startsWith("file://")}W.preloadedImages={},W.preloadedAudios={};var eS="jxl_decoder.wasm";function eC(e){try{if(e==eS&&g)return new Uint8Array(g);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(r){eT(r)}}eb(eS)||(eS=K(eS));var eO={159320:function(){throw"Canceled!"},159338:function(e,r){setTimeout(function(){rp(e,r)},0)}};function eA(e){for(;e.length>0;){var r=e.shift();if("function"==typeof r){r(W);continue}var n=r.func;"number"==typeof n?void 0===r.arg?R.get(n)():R.get(n)(r.arg):n(void 0===r.arg?null:r.arg)}}function eI(e){return e}function eN(e){return e.replace(/\b_Z[\w\d_]+/g,function(e){var r,n=r=e;return e===n?e:n+" ["+e+"]"})}var e4={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function e1(e,r){if(e<=0||e>n().length||!0&e||r<0)return -28;if(0==r)return 0;r>=2147483647&&(r=1/0);var t=Atomics.load(i(),r4>>2),a=0;if(t==e&&Atomics.compareExchange(i(),r4>>2,t,0)==t&&(a=1,--r<=0))return 1;var o=Atomics.notify(i(),e>>2,r);if(o>=0)return o+a;throw"Atomics.notify returned an unexpected value "+o}function eR(e){if(q)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var r=eL.pthreads[e];if(r){i()[e+12>>2]=0;var n=r.worker;eL.returnWorkerToPool(n)}}W._emscripten_futex_wake=e1;var eL={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],initMainThreadBlock:function(){for(var e=0;e<4;++e)eL.allocateUnusedWorker()},initRuntime:function(){for(var e=ro(228),r=0;r<57;++r)o()[e/4+r]=0;i()[e+12>>2]=e;var n=e+152;i()[n>>2]=n;for(var t=ro(512),r=0;r<128;++r)o()[t/4+r]=0;Atomics.store(o(),e+100>>2,t),Atomics.store(o(),e+40>>2,e),r$(e,!G,1),rl(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],runExitHandlers:function(){for(;eL.threadExitHandlers.length>0;)eL.threadExitHandlers.pop()();q&&ry()&&rw()},runExitHandlersAndDeinitThread:function(e,r){Atomics.store(o(),e+56>>2,1),Atomics.store(o(),e+60>>2,0),eL.runExitHandlers(),Atomics.store(o(),e+4>>2,r),Atomics.store(o(),e+0>>2,1),e1(e+0,2147483647),r$(0,0,0)},setExitStatus:function(e){x=e},threadExit:function(e){var r=ry();r&&(eL.runExitHandlersAndDeinitThread(r,e),q&&postMessage({cmd:"exit"}))},threadCancel:function(){eL.runExitHandlersAndDeinitThread(ry(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in eL.pthreads){var r=eL.pthreads[e];r&&r.worker&&eL.returnWorkerToPool(r.worker)}eL.pthreads={};for(var n=0;n<eL.unusedWorkers.length;++n){var t=eL.unusedWorkers[n];t.terminate()}eL.unusedWorkers=[];for(var n=0;n<eL.runningWorkers.length;++n){var t=eL.runningWorkers[n],r=t.pthread;eL.freeThreadData(r),t.terminate()}eL.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var r=i()[e.threadInfoStruct+100>>2];i()[e.threadInfoStruct+100>>2]=0,ra(r),ra(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&ra(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){eL.runWithoutMainThreadQueuedCalls(function(){delete eL.pthreads[e.pthread.threadInfoStruct],eL.unusedWorkers.push(e),eL.runningWorkers.splice(eL.runningWorkers.indexOf(e),1),eL.freeThreadData(e.pthread),e.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(e){i()[rN>>2]=0;try{e()}finally{i()[rN>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in eL.tlsInitFunctions)eL.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(r,n){r.onmessage=function(e){var t=e.data,a=t.cmd;if(r.pthread&&(eL.currentProxiedOperationCallerThread=r.pthread.threadInfoStruct),t.targetThread&&t.targetThread!=ry()){var u=eL.pthreads[t.targetThread];u?u.worker.postMessage(e.data,t.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+t.targetThread+", but that thread no longer exists!"),eL.currentProxiedOperationCallerThread=void 0;return}if("processQueuedMainThreadWork"===a)rm();else if("spawnThread"===a)eX(e.data);else if("cleanupThread"===a)eR(t.thread);else if("killThread"===a)!function e(r){if(q)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!r)throw"Internal Error! Null pthread_ptr in killThread!";i()[r+12>>2]=0;var n=eL.pthreads[r];n.worker.terminate(),eL.freeThreadData(n),eL.runningWorkers.splice(eL.runningWorkers.indexOf(n.worker),1),n.worker.pthread=void 0}(t.thread);else if("cancelThread"===a)!function e(r){if(q)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!r)throw"Internal Error! Null pthread_ptr in cancelThread!";eL.pthreads[r].worker.postMessage({cmd:"cancel"})}(t.thread);else if("loaded"===a)r.loaded=!0,n&&n(r),r.runPthread&&(r.runPthread(),delete r.runPthread);else if("print"===a)Y("Thread "+t.threadId+": "+t.text);else if("printErr"===a)X("Thread "+t.threadId+": "+t.text);else if("alert"===a)alert("Thread "+t.threadId+": "+t.text);else if("exit"===a)r.pthread&&Atomics.load(o(),r.pthread.threadInfoStruct+64>>2)&&eL.returnWorkerToPool(r);else if("exitProcess"===a)try{(function e(r,n){if(x=r,!(n&&eP())||0!==r){var t;if(!n&&q)throw postMessage({cmd:"exitProcess",returnCode:r}),new r1(r);eP()||(eL.terminateAllThreads(),q||(eA(em),void 0!==rs&&rs(0),(t=ez.buffers)[1].length&&ez.printChar(1,10),t[2].length&&ez.printChar(2,10),eL.runExitHandlers(),e_=!0),W.onExit&&W.onExit(r),ea=!0),B(r,new r1(r))}})(t.returnCode)}catch(s){if(s instanceof r1)return;throw s}else"cancelDone"===a?eL.returnWorkerToPool(r):"objectTransfer"===a?eL.receiveObjectTransfer(e.data):"setimmediate"===e.data.target?r.postMessage(e.data):X("worker sent an unknown command "+a);eL.currentProxiedOperationCallerThread=void 0},r.onerror=function(e){X("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},U&&(r.on("message",function(e){r.onmessage({data:e})}),r.on("error",function(e){r.onerror(e)}),r.on("exit",function(e){})),r.postMessage({cmd:"load",urlOrBlob:W.mainScriptUrlOrBlob||e,wasmMemory:w,wasmModule:y})},allocateUnusedWorker:function(){var e=K("jxl_decoder.worker.js");eL.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==eL.unusedWorkers.length&&(eL.allocateUnusedWorker(),eL.loadWasmModuleToWorker(eL.unusedWorkers[0])),eL.unusedWorkers.pop()},busySpinWait:function(e){for(var r=performance.now()+e;performance.now()<r;);}};function e2(){var e=Error();if(!e.stack){try{throw Error()}catch(r){e=r}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function eP(){return et||!1}function eD(e,r){if(q)return eM(1,1,e,r);em.unshift({func:e,arg:r})}function e3(e,r){return eD(e,r)}W.establishStackSpace=function e(r,n){rS(r,n),rb(r)},W.invokeEntryPoint=function e(r,n){return R.get(r)(n)},W.keepRuntimeAlive=eP,L=U?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:q?function(){return performance.now()-W.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var eW=[];function ej(){}function eH(e,r,t){if(e<=0||e>n().length||!0&e)return -28;if(F){if(Atomics.load(i(),e>>2)!=r)return -6;for(var a=performance.now(),o=a+t,u=Atomics.exchange(i(),r4>>2,e);;){if((a=performance.now())>o)return u=Atomics.exchange(i(),r4>>2,0),-73;if(0==(u=Atomics.exchange(i(),r4>>2,0)))break;if(rm(),Atomics.load(i(),e>>2)!=r)return -6;u=Atomics.exchange(i(),r4>>2,e)}return 0}var s=Atomics.wait(i(),e>>2,r,t);if("timed-out"===s)return -73;if("not-equal"===s)return -6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s}function eM(e,r){for(var n=arguments.length-2,t=rT(),a=n,i=rk(8*a),o=i>>3,u=0;u<n;u++){var c=arguments[2+u];s()[o+u]=c}var f=rE(e,a,i,r);return rb(t),f}var e6=[];function eB(e){try{return w.grow(e-T.byteLength+65535>>>16),ed(w.buffer),1}catch(r){}}var e5={inEventHandler:0,removeAllEventListeners:function(){for(var e=e5.eventHandlers.length-1;e>=0;--e)e5._removeHandler(e);e5.eventHandlers=[],e5.deferredCalls=[]},registerRemoveEventListeners:function(){e5.removeEventListenersRegistered||(em.push(e5.removeAllEventListeners),e5.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,r,n){function t(e,r){if(e.length!=r.length)return!1;for(var n in e)if(e[n]!=r[n])return!1;return!0}for(var a in e5.deferredCalls){var i=e5.deferredCalls[a];if(i.targetFunction==e&&t(i.argsList,n))return}e5.deferredCalls.push({targetFunction:e,precedence:r,argsList:n}),e5.deferredCalls.sort(function(e,r){return e.precedence<r.precedence})},removeDeferredCalls:function(e){for(var r=0;r<e5.deferredCalls.length;++r)e5.deferredCalls[r].targetFunction==e&&(e5.deferredCalls.splice(r,1),--r)},canPerformEventHandlerRequests:function(){return e5.inEventHandler&&e5.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(e5.canPerformEventHandlerRequests())for(var e=0;e<e5.deferredCalls.length;++e){var r=e5.deferredCalls[e];e5.deferredCalls.splice(e,1),--e,r.targetFunction.apply(null,r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,r){for(var n=0;n<e5.eventHandlers.length;++n)e5.eventHandlers[n].target!=e||r&&r!=e5.eventHandlers[n].eventTypeString||e5._removeHandler(n--)},_removeHandler:function(e){var r=e5.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),e5.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var r=function r(n){++e5.inEventHandler,e5.currentEventHandler=e,e5.runDeferredCalls(),e.handlerFunc(n),e5.runDeferredCalls(),--e5.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=r,e.target.addEventListener(e.eventTypeString,r,e.useCapture),e5.eventHandlers.push(e),e5.registerRemoveEventListeners();else for(var n=0;n<e5.eventHandlers.length;++n)e5.eventHandlers[n].target==e.target&&e5.eventHandlers[n].eventTypeString==e.eventTypeString&&e5._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,r,n,t,a){var o=rT(),u=rk(12);i()[u>>2]=n,i()[u+4>>2]=t,i()[u+8>>2]=a,rv(0,e,637534208,r,t,u),rb(o)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return eL.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},eF=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function eG(e){var r,n;return eF[r=(n=r=e)>2?es(n):n]||("undefined"!=typeof document?document.querySelector(r):void 0)}function eU(e,r,n){var t,a,o,u,s,c,f,l,d,p,h,m,E,v,_=eG(e);if(!_)return -4;if(_.canvasSharedPtr&&(i()[_.canvasSharedPtr>>2]=r,i()[_.canvasSharedPtr+4>>2]=n),_.offscreenCanvas||!_.controlTransferredOffscreen){_.offscreenCanvas&&(_=_.offscreenCanvas);var $=!1;if(_.GLctxObject&&_.GLctxObject.GLctx){var g=_.GLctxObject.GLctx.getParameter(2978);$=0===g[0]&&0===g[1]&&g[2]===_.width&&g[3]===_.height}_.width=r,_.height=n,$&&_.GLctxObject.GLctx.viewport(0,0,r,n)}else{if(!_.canvasSharedPtr)return -4;return h=i()[_.canvasSharedPtr+8>>2],m=e,E=r,v=n,m=m?es(m):"",t=h,a=m,o=E,u=v,l=rT(),d=rk(12),p=0,a&&(p=(c=function e(r){for(var n=0,t=0;t<r.length;++t){var a=r.charCodeAt(t);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&r.charCodeAt(++t)),a<=127?++n:a<=2047?n+=2:a<=65535?n+=3:n+=4}return n}(s=a)+1,f=ro(c),ec(s,f,c),f)),i()[d>>2]=p,i()[d+4>>2]=o,i()[d+8>>2]=u,rv(0,t,657457152,0,p,d),rb(l),1}return 0}function e7(e,r,n){return q?eM(2,1,e,r,n):eU(e,r,n)}var eV={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function e(r){eV.lastError||(eV.lastError=r)},getNewId:function(e){for(var r=eV.counter++,n=e.length;n<r;n++)e[n]=null;return r},getSource:function(e,r,n,t){for(var a="",o=0;o<r;++o){var u=t?i()[t+4*o>>2]:-1;a+=es(i()[n+4*o>>2],u<0?void 0:u)}return a},createContext:function(e,r){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(r,n){var t=e.getContextSafariWebGL2Fixed(r,n);return"webgl"==r==t instanceof WebGLRenderingContext?t:null});var n=e.getContext("webgl",r);return n?eV.registerContext(n,r):0},registerContext:function(e,r){var n=ro(8);i()[n+4>>2]=ry();var t={handle:n,attributes:r,version:r.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=t),eV.contexts[n]=t,(void 0===r.enableExtensionsByDefault||r.enableExtensionsByDefault)&&eV.initExtensions(t),n},makeContextCurrent:function(e){return eV.currentContext=eV.contexts[e],W.ctx=P=eV.currentContext&&eV.currentContext.GLctx,!(e&&!P)},getContext:function(e){return eV.contexts[e]},deleteContext:function(e){eV.currentContext===eV.contexts[e]&&(eV.currentContext=null),"object"==typeof e5&&e5.removeAllHandlersOnTarget(eV.contexts[e].GLctx.canvas),eV.contexts[e]&&eV.contexts[e].GLctx.canvas&&(eV.contexts[e].GLctx.canvas.GLctxObject=void 0),ra(eV.contexts[e].handle),eV.contexts[e]=null},initExtensions:function(e){if(e||(e=eV.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r,n=e.GLctx;(function e(r){var n=r.getExtension("ANGLE_instanced_arrays");if(n)return r.vertexAttribDivisor=function(e,r){n.vertexAttribDivisorANGLE(e,r)},r.drawArraysInstanced=function(e,r,t,a){n.drawArraysInstancedANGLE(e,r,t,a)},r.drawElementsInstanced=function(e,r,t,a,i){n.drawElementsInstancedANGLE(e,r,t,a,i)},1})(n),function e(r){var n=r.getExtension("OES_vertex_array_object");if(n)return r.createVertexArray=function(){return n.createVertexArrayOES()},r.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},r.bindVertexArray=function(e){n.bindVertexArrayOES(e)},r.isVertexArray=function(e){return n.isVertexArrayOES(e)},1}(n),function e(r){var n=r.getExtension("WEBGL_draw_buffers");if(n)return r.drawBuffers=function(e,r){n.drawBuffersWEBGL(e,r)},1}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(r=n).multiDrawWebgl=r.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach(function(e){e.includes("lose_context")||e.includes("debug")||n.getExtension(e)})}}},eq=["default","low-power","high-performance"],ez={mappings:{},buffers:[null,[],[]],printChar:function(e,r){var n=ez.buffers[e];0===r||10===r?((1===e?Y:X)(eu(n,0)),n.length=0):n.push(r)},varargs:void 0,get:function(){return ez.varargs+=4,i()[ez.varargs-4>>2]},getStr:function(e){return es(e)},get64:function(e,r){return e}};function eK(e){return q?eM(3,1,e):0}function eQ(e,r,n,t,a){if(q)return eM(4,1,e,r,n,t,a)}function eY(e,r,n,a){if(q)return eM(5,1,e,r,n,a);for(var o=0,u=0;u<n;u++){for(var s=i()[r+8*u>>2],c=i()[r+(8*u+4)>>2],f=0;f<c;f++)ez.printChar(e,t()[s+f]);o+=c}return i()[a>>2]=o,0}function eX(e){if(q)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var r=eL.getNewWorker();if(!r)return 6;if(void 0!==r.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";eL.runningWorkers.push(r);for(var n=ro(512),t=0;t<128;++t)i()[n+4*t>>2]=0;var a=e.stackBase+e.stackSize,u=eL.pthreads[e.pthread_ptr]={worker:r,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},s=u.threadInfoStruct>>2;Atomics.store(o(),s+16,e.detached),Atomics.store(o(),s+25,n),Atomics.store(o(),s+10,u.threadInfoStruct),Atomics.store(o(),s+20,e.stackSize),Atomics.store(o(),s+19,a),Atomics.store(o(),s+26,e.stackSize),Atomics.store(o(),s+28,a),Atomics.store(o(),s+29,e.detached);var c=r0();Atomics.store(o(),s+43,c+40),r.pthread=u;var f={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};return r.runPthread=function(){f.time=performance.now(),r.postMessage(f,e.transferList)},r.loaded&&(r.runPthread(),delete r.runPthread),0}function eJ(){if(q){var e=ry();if(e&&!Atomics.load(o(),e+56>>2)&&2==Atomics.load(o(),e+0>>2))throw"Canceled!"}}function eZ(e){en(e)}q||eL.initMainThreadBlock();var e9=[null,eD,e7,eK,eQ,eY],re={__assert_fail:function e(r,n,t,a){eT("Assertion failed: "+es(r)+", at: "+[n?es(n):"unknown filename",t,a?es(a):"unknown function"])},__call_main:function e(r,n){var t=_main(r,n);if(!eP())return postMessage({cmd:"exitProcess",returnCode:t}),t},__clock_gettime:function e(r,n){return function e(r,n){var t;if(0===r)t=Date.now();else{if(1!==r&&4!==r)return i()[rg()>>2]=28,-1;t=L()}return i()[n>>2]=t/1e3|0,i()[n+4>>2]=t%1e3*1e6|0,0}(r,n)},__cxa_atexit:e3,__cxa_thread_atexit:function e(r,n){var t,a;return t=r,a=n,void eL.threadExitHandlers.push(function(){R.get(t)(a)})},_emscripten_notify_thread_queue:function e(r,n){if(r==n)postMessage({cmd:"processQueuedMainThreadWork"});else if(q)postMessage({targetThread:r,cmd:"processThreadQueue"});else{var t=eL.pthreads[r],a=t&&t.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1},abort:function e(){eT()},emscripten_asm_const_int:function e(r,n,a){var o=function e(r,n){for(eW.length=0,n>>=2;a=t()[r++];){var a,o=a<105;o&&1&n&&n++,eW.push(o?s()[n++>>1]:i()[n]),++n}return eW}(n,a);return eO[r].apply(null,o)},emscripten_check_blocking_allowed:ej,emscripten_conditional_set_current_thread_status:function e(r,n){},emscripten_futex_wait:eH,emscripten_futex_wake:e1,emscripten_get_now:L,emscripten_memcpy_big:function e(r,n,a){t().copyWithin(r,n,n+a)},emscripten_receive_on_main_thread_js:function e(r,n,t){e6.length=n;for(var a=t>>3,i=0;i<n;i++)e6[i]=s()[a+i];return(r<0?eO[-r-1]:e9[r]).apply(null,e6)},emscripten_resize_heap:function e(r){var n=t().length;if((r>>>=0)<=n||r>2147483648)return!1;for(var a=1;a<=4;a*=2){var i=n*(1+.2/a);i=Math.min(i,r+100663296);var o=Math.min(2147483648,el(Math.max(r,i),65536));if(eB(o))return!0}return!1},emscripten_set_canvas_element_size:function e(r,n,t){return eG(r)?eU(r,n,t):e7(r,n,t)},emscripten_set_current_thread_status:function e(r){},emscripten_set_thread_name:function e(r,n){},emscripten_webgl_create_context:function e(r,n){var t,a,o,u,s,c;return t=r,a=n,o=a>>2,u=i()[o+6],s={alpha:!!i()[o+0],depth:!!i()[o+1],stencil:!!i()[o+2],antialias:!!i()[o+3],premultipliedAlpha:!!i()[o+4],preserveDrawingBuffer:!!i()[o+5],powerPreference:eq[u],failIfMajorPerformanceCaveat:!!i()[o+7],majorVersion:i()[o+8],minorVersion:i()[o+9],enableExtensionsByDefault:i()[o+10],explicitSwapControl:i()[o+11],proxyContextToMainThread:i()[o+12],renderViaOffscreenBackBuffer:i()[o+13]},c=eG(t),!c||s.explicitSwapControl?0:eV.createContext(c,s)},fd_close:eK,fd_seek:eQ,fd_write:eY,initPthreadsJS:function e(){eL.initRuntime()},memory:w||W.wasmMemory,pthread_create:function e(r,n,t,a){if("undefined"==typeof SharedArrayBuffer)return X("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!r)return X("pthread_create called with a null thread pointer!"),28;var u=[];if(q&&0===u.length)return rh(687865856,r,n,t,a);var s=0,c=0,f=0;n&&-1!=n?(s=i()[n>>2],s+=81920,c=i()[n+8>>2],f=0!==i()[n+12>>2]):s=2097152;var l=0==c;l?c=rO(16,s):ei((c-=s)>0);for(var d=ro(228),p=0;p<57;++p)o()[(d>>2)+p]=0;i()[r>>2]=d,i()[d+12>>2]=d;var h=d+152;i()[h>>2]=h;var m={stackBase:c,stackSize:s,allocatedOwnStack:l,detached:f,startRoutine:t,pthread_ptr:d,arg:a,transferList:u};return q?(m.cmd="spawnThread",postMessage(m,u),0):eX(m)},pthread_join:function e(r,n){return function e(r,n,t){if(!r)return X("pthread_join attempted on a null thread pointer!"),e4.ESRCH;if(q&&ry()==r)return X("PThread "+r+" is attempting to join to itself!"),e4.EDEADLK;if(!q&&rd()==r)return X("Main thread "+r+" is attempting to join to itself!"),e4.EDEADLK;if(i()[r+12>>2]!==r)return X("pthread_join attempted on thread "+r+", which does not point to a valid thread, or does not exist anymore!"),e4.ESRCH;if(Atomics.load(o(),r+64>>2))return X("Attempted to join thread "+r+", which was already detached!"),e4.EINVAL;for(t&&ej();;){var a=Atomics.load(o(),r+0>>2);if(1==a){var u=Atomics.load(o(),r+4>>2);return n&&(i()[n>>2]=u),Atomics.store(o(),r+64>>2,1),q?postMessage({cmd:"cleanupThread",thread:r}):eR(r),0}if(!t)return e4.EBUSY;eJ(),q||rm(),eH(r+0,a,q?100:1)}}(r,n,!0)},setTempRet0:eZ};(function e(){var r={env:re,wasi_snapshot_preview1:re};function n(e,r){var n,t=e.exports;if(W.asm=t,R=W.asm.__indirect_function_table,n=W.asm.__wasm_call_ctors,eh.unshift(n),eL.tlsInitFunctions.push(W.asm.emscripten_tls_init),y=r,!q){var a=eL.unusedWorkers.length;eL.unusedWorkers.forEach(function(e){eL.loadWasmModuleToWorker(e,function(){--a||function e(r){if(ew--,W.monitorRunDependencies&&W.monitorRunDependencies(ew),0==ew&&(null!==ey&&(clearInterval(ey),ey=null),ex)){var n=ex;ex=null,n()}}("wasm-instantiate")})})}}function t(e){n(e.instance,e.module)}function a(e){return(function e(){if(!g&&(F||G)){if("function"==typeof fetch&&!ek(eS))return fetch(eS,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+eS+"'";return e.arrayBuffer()}).catch(function(){return eC(eS)});if(p)return new Promise(function(e,r){p(eS,function(r){e(new Uint8Array(r))},r)})}return Promise.resolve().then(function(){return eC(eS)})})().then(function(e){return WebAssembly.instantiate(e,r)}).then(e,function(e){X("failed to asynchronously prepare wasm: "+e),eT(e)})}if(!q&&(ei(!q,"addRunDependency cannot be used in a pthread worker"),ew++,W.monitorRunDependencies&&W.monitorRunDependencies(ew)),W.instantiateWasm)try{return W.instantiateWasm(r,n)}catch(i){return X("Module.instantiateWasm callback failed with error: "+i),!1}return(g||"function"!=typeof WebAssembly.instantiateStreaming||eb(eS)||ek(eS)||"function"!=typeof fetch?a(t):fetch(eS,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,r).then(t,function(e){return X("wasm streaming compile failed: "+e),X("falling back to ArrayBuffer instantiation"),a(t)})})).catch(f),{}})();var rr=W.___wasm_call_ctors=function(){return(rr=W.___wasm_call_ctors=W.asm.__wasm_call_ctors).apply(null,arguments)},rn=W._jxlCreateInstance=function(){return(rn=W._jxlCreateInstance=W.asm.jxlCreateInstance).apply(null,arguments)},rt=W._jxlDestroyInstance=function(){return(rt=W._jxlDestroyInstance=W.asm.jxlDestroyInstance).apply(null,arguments)},ra=W._free=function(){return(ra=W._free=W.asm.free).apply(null,arguments)},ri=W._jxlProcessInput=function(){return(ri=W._jxlProcessInput=W.asm.jxlProcessInput).apply(null,arguments)},ro=W._malloc=function(){return(ro=W._malloc=W.asm.malloc).apply(null,arguments)},ru=W._jxlFlush=function(){return(ru=W._jxlFlush=W.asm.jxlFlush).apply(null,arguments)},rs=W._fflush=function(){return(rs=W._fflush=W.asm.fflush).apply(null,arguments)},rc=W._emscripten_tls_init=function(){return(rc=W._emscripten_tls_init=W.asm.emscripten_tls_init).apply(null,arguments)},rf=W._emscripten_current_thread_process_queued_calls=function(){return(rf=W._emscripten_current_thread_process_queued_calls=W.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},rl=W._emscripten_register_main_browser_thread_id=function(){return(rl=W._emscripten_register_main_browser_thread_id=W.asm.emscripten_register_main_browser_thread_id).apply(null,arguments)},rd=W._emscripten_main_browser_thread_id=function(){return(rd=W._emscripten_main_browser_thread_id=W.asm.emscripten_main_browser_thread_id).apply(null,arguments)},rp=W.__emscripten_do_dispatch_to_thread=function(){return(rp=W.__emscripten_do_dispatch_to_thread=W.asm._emscripten_do_dispatch_to_thread).apply(null,arguments)},r8=W._emscripten_sync_run_in_main_thread_2=function(){return(r8=W._emscripten_sync_run_in_main_thread_2=W.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},rh=W._emscripten_sync_run_in_main_thread_4=function(){return(rh=W._emscripten_sync_run_in_main_thread_4=W.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)},rm=W._emscripten_main_thread_process_queued_calls=function(){return(rm=W._emscripten_main_thread_process_queued_calls=W.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},rE=W._emscripten_run_in_main_runtime_thread_js=function(){return(rE=W._emscripten_run_in_main_runtime_thread_js=W.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},rv=W.__emscripten_call_on_thread=function(){return(rv=W.__emscripten_call_on_thread=W.asm._emscripten_call_on_thread).apply(null,arguments)},r_=W._emscripten_proxy_main=function(){return(r_=W._emscripten_proxy_main=W.asm.emscripten_proxy_main).apply(null,arguments)},r$=W.__emscripten_thread_init=function(){return(r$=W.__emscripten_thread_init=W.asm._emscripten_thread_init).apply(null,arguments)},rg=W.___errno_location=function(){return(rg=W.___errno_location=W.asm.__errno_location).apply(null,arguments)},r0=W._emscripten_get_global_libc=function(){return(r0=W._emscripten_get_global_libc=W.asm.emscripten_get_global_libc).apply(null,arguments)},rw=W.___pthread_tsd_run_dtors=function(){return(rw=W.___pthread_tsd_run_dtors=W.asm.__pthread_tsd_run_dtors).apply(null,arguments)},ry=W._pthread_self=function(){return(ry=W._pthread_self=W.asm.pthread_self).apply(null,arguments)},rx=W.___emscripten_pthread_data_constructor=function(){return(rx=W.___emscripten_pthread_data_constructor=W.asm.__emscripten_pthread_data_constructor).apply(null,arguments)},rT=W.stackSave=function(){return(rT=W.stackSave=W.asm.stackSave).apply(null,arguments)},rb=W.stackRestore=function(){return(rb=W.stackRestore=W.asm.stackRestore).apply(null,arguments)},rk=W.stackAlloc=function(){return(rk=W.stackAlloc=W.asm.stackAlloc).apply(null,arguments)},rS=W._emscripten_stack_set_limits=function(){return(rS=W._emscripten_stack_set_limits=W.asm.emscripten_stack_set_limits).apply(null,arguments)},rC=W._setThrew=function(){return(rC=W._setThrew=W.asm.setThrew).apply(null,arguments)},rO=W._memalign=function(){return(rO=W._memalign=W.asm.memalign).apply(null,arguments)},rA=W.dynCall_iiji=function(){return(rA=W.dynCall_iiji=W.asm.dynCall_iiji).apply(null,arguments)},rI=W.dynCall_jiji=function(){return(rI=W.dynCall_jiji=W.asm.dynCall_jiji).apply(null,arguments)},rN=W.__emscripten_allow_main_runtime_queued_calls=159308,r4=W.__emscripten_main_thread_futex=170172;function r1(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function rR(e){if(e=e||H,!(ew>0)){if(q){c(W),e$(),postMessage({cmd:"loaded"});return}(function e(){if(!q){if(W.preRun)for("function"==typeof W.preRun&&(W.preRun=[W.preRun]);W.preRun.length;)eg(W.preRun.shift());eA(e8)}})(),!(ew>0)&&(W.setStatus?(W.setStatus("Running..."),setTimeout(function(){setTimeout(function(){W.setStatus("")},1),r()},1)):r())}function r(){!D&&(D=!0,W.calledRun=!0,ea||(e$(),c(W),W.onRuntimeInitialized&&W.onRuntimeInitialized(),function e(){if(!q){if(W.postRun)for("function"==typeof W.postRun&&(W.postRun=[W.postRun]);W.postRun.length;)e0(W.postRun.shift());eA(eE)}}()))}}if(W.PThread=eL,W.PThread=eL,W.wasmMemory=w,W.ExitStatus=r1,ex=function e(){D||rR(),D||(ex=e)},W.run=rR,W.preInit)for("function"==typeof W.preInit&&(W.preInit=[W.preInit]);W.preInit.length>0;)W.preInit.pop()();return q&&(et=!1,eL.initWorker()),rR(),r.ready}}();"object"==typeof exports&&"object"==typeof module?module.exports=JxlCodecModule:"function"==typeof define&&define.amd?define([],function(){return JxlCodecModule}):"object"==typeof exports&&(exports.JxlCodecModule=JxlCodecModule);